<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTTPè¯·æ±‚å·¥å…· - åœ¨çº¿å·¥å…·ç®±</title>
  <meta name="description" content="åœ¨çº¿HTTPè¯·æ±‚å·¥å…·ï¼Œæ”¯æŒGETã€POSTã€PUTã€DELETEç­‰è¯·æ±‚æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ã€‚">
  <link href="../css/tailwind.min.css" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒ</text></svg>">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2N5WRV2SNG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-2N5WRV2SNG');
  </script>
  <style>
    .tool-container {
      max-width: 1000px;
    }
    textarea {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-all;
    }
    .response-header {
      background-color: #eff6ff;
      color: #1e40af;
      border: 1px solid #dbeafe;
    }
    .response-body {
      background-color: #f8fafc;
      border: 1px solid #e2e8f0;
    }
    .error-message {
      background-color: #fee2e2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }
    .success-message {
      background-color: #dcfce7;
      color: #166534;
      border: 1px solid #bbf7d0;
    }
    .warning-message {
      background-color: #fffbeb;
      color: #854d0e;
      border: 1px solid #fef3c7;
    }
    .header-row:not(:last-child) {
      border-bottom: 1px solid #e5e7eb;
    }
    /* è¿›åº¦æ¡æ ·å¼ */
    .progress-bar-container {
      width: 100%;
      height: 6px;
      background-color: #e5e7eb;
      border-radius: 3px;
      overflow: hidden;
      margin-top: 8px;
    }
    
    .progress-bar {
      height: 100%;
      background-color: #4f46e5;
      width: 0%;
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- å¯¼èˆªæ  -->
  <nav class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <a href="../index.html" class="flex-shrink-0 flex items-center">
            <span class="text-2xl font-bold text-indigo-600">ğŸ› ï¸</span>
            <h1 class="ml-2 text-xl font-bold text-gray-900">åœ¨çº¿å·¥å…·ç®±</h1>
          </a>
        </div>
        <div class="flex items-center">
          <a href="../index.html" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">
            è¿”å›é¦–é¡µ
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="tool-container mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl mb-4">
          HTTPè¯·æ±‚å·¥å…·
        </h1>
        <p class="text-lg text-gray-500">
          å‘é€HTTPè¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ç»“æœï¼Œæ”¯æŒè‡ªå®šä¹‰è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“
        </p>
      </div>

      <div class="bg-white shadow rounded-lg overflow-hidden mb-6">
        <!-- è¯·æ±‚é…ç½®åŒºåŸŸ -->
        <div class="p-6 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900 mb-4">è¯·æ±‚é…ç½®</h2>
          
          <!-- URL å’Œ Method -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="md:col-span-1">
              <label for="method" class="block text-sm font-medium text-gray-700 mb-1">è¯·æ±‚æ–¹æ³•</label>
              <select id="method" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="PATCH">PATCH</option>
                <option value="DELETE">DELETE</option>
                <option value="HEAD">HEAD</option>
                <option value="OPTIONS">OPTIONS</option>
              </select>
            </div>
            <div class="md:col-span-3">
              <label for="url" class="block text-sm font-medium text-gray-700 mb-1">URL</label>
              <input 
                type="text" 
                id="url" 
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                placeholder="https://api.example.com/users"
                value="https://jsonplaceholder.typicode.com/posts">
            </div>
          </div>
          
          <!-- Headers -->
          <div class="mb-4">
            <div class="flex justify-between items-center mb-2">
              <label class="block text-sm font-medium text-gray-700">è¯·æ±‚å¤´</label>
              <button id="addHeader" class="text-sm text-indigo-600 hover:text-indigo-800">
                + æ·»åŠ è¯·æ±‚å¤´
              </button>
            </div>
            <div id="headersContainer" class="border border-gray-300 rounded-md">
              <!-- Header rows will be added here dynamically -->
              <div class="header-row flex p-2">
                <input type="text" placeholder="Key" class="flex-1 px-2 py-1 border border-gray-300 mr-1 text-sm">
                <input type="text" placeholder="Value" class="flex-1 px-2 py-1 border border-gray-300 ml-1 text-sm">
                <button class="remove-header text-red-600 ml-2 text-sm">-</button>
              </div>
            </div>
          </div>
          
          <!-- Body -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">è¯·æ±‚ä½“</label>
            <textarea 
              id="body" 
              rows="6" 
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
              placeholder='{&#10;  "title": "foo",&#10;  "body": "bar",&#10;  "userId": 1&#10;}'></textarea>
          </div>
          
          <!-- æ“ä½œæŒ‰é’® -->
          <div class="flex flex-wrap gap-3">
            <button id="sendRequest" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              å‘é€è¯·æ±‚
            </button>
            <button id="clearRequest" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
              æ¸…ç©º
            </button>
          </div>
          
          <!-- è¿›åº¦æ¡ -->
          <div id="progressContainer" class="progress-bar-container mt-4 hidden">
            <div id="progressBar" class="progress-bar"></div>
          </div>
        </div>
      </div>

      <!-- å“åº”ç»“æœåŒºåŸŸ -->
      <div id="responseSection" class="bg-white shadow rounded-lg overflow-hidden hidden">
        <div class="p-6">
          <h2 class="text-lg font-medium text-gray-900 mb-4">å“åº”ç»“æœ</h2>
          
          <!-- å“åº”çŠ¶æ€ -->
          <div id="responseStatus" class="mb-4 p-3 rounded-md hidden">
          </div>
          
          <!-- å“åº”å¤´ -->
          <div class="mb-4">
            <h3 class="text-md font-medium text-gray-800 mb-2">å“åº”å¤´</h3>
            <div id="responseHeaders" class="p-3 rounded-md response-header whitespace-pre-wrap text-sm">
              <!-- Response headers will be displayed here -->
            </div>
          </div>
          
          <!-- å“åº”ä½“ -->
          <div>
            <h3 class="text-md font-medium text-gray-800 mb-2">å“åº”ä½“</h3>
            <div class="mb-2 flex justify-end">
              <button id="copyResponse" class="text-sm text-indigo-600 hover:text-indigo-800">
                å¤åˆ¶å“åº”å†…å®¹
              </button>
            </div>
            <div id="responseBody" class="p-3 rounded-md response-body">
              <pre class="whitespace-pre-wrap text-sm" id="responseBodyText"><!-- Response body will be displayed here --></pre>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ä½¿ç”¨è¯´æ˜ -->
      <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
        <h3 class="text-md font-medium text-blue-800 mb-2">ä½¿ç”¨è¯´æ˜</h3>
        <ul class="list-disc pl-5 space-y-1 text-blue-700 text-sm">
          <li>è¾“å…¥è¦è¯·æ±‚çš„URLå’Œé€‰æ‹©HTTPæ–¹æ³•</li>
          <li>æ·»åŠ å¿…è¦çš„è¯·æ±‚å¤´ï¼ˆå¦‚ Content-Type: application/jsonï¼‰</li>
          <li>å¯¹äºPOSTã€PUTç­‰æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä½“ä¸­æ·»åŠ æ•°æ®</li>
          <li>ç‚¹å‡»"å‘é€è¯·æ±‚"æŒ‰é’®å‘é€è¯·æ±‚</li>
          <li class="font-medium">æ³¨æ„ï¼šç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œæ‚¨åªèƒ½è¯·æ±‚æ”¯æŒCORSçš„æ¥å£</li>
        </ul>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOMå…ƒç´ 
      const methodSelect = document.getElementById('method');
      const urlInput = document.getElementById('url');
      const headersContainer = document.getElementById('headersContainer');
      const bodyTextarea = document.getElementById('body');
      const sendRequestBtn = document.getElementById('sendRequest');
      const clearRequestBtn = document.getElementById('clearRequest');
      const addHeaderBtn = document.getElementById('addHeader');
      const responseSection = document.getElementById('responseSection');
      const responseStatus = document.getElementById('responseStatus');
      const responseHeaders = document.getElementById('responseHeaders');
      const responseBodyText = document.getElementById('responseBodyText');
      const copyResponseBtn = document.getElementById('copyResponse');
      // è¿›åº¦æ¡å…ƒç´ 
      const progressContainer = document.getElementById('progressContainer');
      const progressBar = document.getElementById('progressBar');
      
      // æ·»åŠ è¯·æ±‚å¤´è¡Œ
      addHeaderBtn.addEventListener('click', function() {
        const headerRow = document.createElement('div');
        headerRow.className = 'header-row flex p-2';
        headerRow.innerHTML = `
          <input type="text" placeholder="Key" class="flex-1 px-2 py-1 border border-gray-300 mr-1 text-sm">
          <input type="text" placeholder="Value" class="flex-1 px-2 py-1 border border-gray-300 ml-1 text-sm">
          <button class="remove-header text-red-600 ml-2 text-sm">-</button>
        `;
        headersContainer.appendChild(headerRow);
      });
      
      // åˆ é™¤è¯·æ±‚å¤´è¡Œäº‹ä»¶å§”æ‰˜
      headersContainer.addEventListener('click', function(e) {
        if (e.target.classList.contains('remove-header')) {
          if (headersContainer.children.length > 1) {
            e.target.parentElement.remove();
          } else {
            // å¦‚æœæ˜¯æœ€åä¸€ä¸ªï¼Œæ¸…ç©ºå†…å®¹è€Œä¸æ˜¯åˆ é™¤
            const inputs = e.target.parentElement.querySelectorAll('input');
            inputs[0].value = '';
            inputs[1].value = '';
          }
        }
      });
      
      // æ¸…ç©ºè¯·æ±‚é…ç½®
      clearRequestBtn.addEventListener('click', function() {
        urlInput.value = 'https://jsonplaceholder.typicode.com/posts';
        methodSelect.value = 'GET';
        bodyTextarea.value = '';
        
        // ä¿ç•™ä¸€ä¸ªç©ºçš„headerè¡Œ
        headersContainer.innerHTML = `
          <div class="header-row flex p-2">
            <input type="text" placeholder="Key" class="flex-1 px-2 py-1 border border-gray-300 mr-1 text-sm">
            <input type="text" placeholder="Value" class="flex-1 px-2 py-1 border border-gray-300 ml-1 text-sm">
            <button class="remove-header text-red-600 ml-2 text-sm">-</button>
          </div>
        `;
        
        // éšè—å“åº”åŒºåŸŸ
        responseSection.classList.add('hidden');
      });
      
      // å‘é€è¯·æ±‚
      sendRequestBtn.addEventListener('click', async function() {
        const url = urlInput.value.trim();
        const method = methodSelect.value;
        
        if (!url) {
          alert('è¯·è¾“å…¥è¯·æ±‚URL');
          return;
        }
        
        try {
          // æ˜¾ç¤ºè¿›åº¦æ¡
          progressContainer.classList.remove('hidden');
          progressBar.style.width = '30%';
          
          // æ„é€ è¯·æ±‚é€‰é¡¹
          const options = {
            method: method,
            headers: {}
          };
          
          // æ·»åŠ è¯·æ±‚å¤´
          const headerRows = headersContainer.querySelectorAll('.header-row');
          headerRows.forEach(row => {
            const keyInput = row.querySelector('input:first-child');
            const valueInput = row.querySelector('input:nth-child(2)');
            const key = keyInput.value.trim();
            const value = valueInput.value.trim();
            
            if (key && value) {
              options.headers[key] = value;
            }
          });
          
          // æ·»åŠ è¯·æ±‚ä½“ï¼ˆå¦‚æœæ–¹æ³•ä¸æ˜¯GET/HEADä¸”æœ‰å†…å®¹ï¼‰
          if (!['GET', 'HEAD'].includes(method) && bodyTextarea.value.trim()) {
            // å¦‚æœæ²¡æœ‰è®¾ç½®Content-Typeä½†è¯·æ±‚ä½“æ˜¯JSONæ ¼å¼ï¼Œåˆ™è‡ªåŠ¨è®¾ç½®
            if (!options.headers['Content-Type']) {
              try {
                JSON.parse(bodyTextarea.value.trim());
                options.headers['Content-Type'] = 'application/json';
              } catch (e) {
                // ä¸æ˜¯æœ‰æ•ˆçš„JSONï¼Œä¸è‡ªåŠ¨è®¾ç½®Content-Type
              }
            }
            
            options.body = bodyTextarea.value;
          }
          
          // æ›´æ–°è¿›åº¦æ¡
          progressBar.style.width = '60%';
          
          // æ˜¾ç¤ºæ­£åœ¨å‘é€çš„çŠ¶æ€
          responseStatus.className = 'mb-4 p-3 rounded-md warning-message';
          responseStatus.textContent = 'æ­£åœ¨å‘é€è¯·æ±‚...';
          responseStatus.classList.remove('hidden');
          
          // å‘é€è¯·æ±‚
          const startTime = Date.now();
          const response = await fetch(url, options);
          const endTime = Date.now();
          
          // å®Œæˆè¿›åº¦æ¡
          progressBar.style.width = '100%';
          
          // çŸ­æš‚å»¶è¿Ÿåéšè—è¿›åº¦æ¡
          setTimeout(() => {
            progressContainer.classList.add('hidden');
            progressBar.style.width = '0%';
          }, 300);
          
          // æ˜¾ç¤ºå“åº”çŠ¶æ€
          const statusClass = response.ok ? 'success-message' : 'error-message';
          responseStatus.className = `mb-4 p-3 rounded-md ${statusClass}`;
          responseStatus.innerHTML = `
            <div class="flex justify-between">
              <div>
                <span class="font-medium">çŠ¶æ€:</span> 
                ${response.status} ${response.statusText}
              </div>
              <div>
                <span class="font-medium">è€—æ—¶:</span> 
                ${endTime - startTime} ms
              </div>
            </div>
          `;
          
          // æ˜¾ç¤ºå“åº”å¤´
          let headersText = '';
          for (const [key, value] of response.headers.entries()) {
            headersText += `${key}: ${value}\n`;
          }
          responseHeaders.textContent = headersText || 'æ— å“åº”å¤´';
          
          // æ˜¾ç¤ºå“åº”ä½“
          const contentType = response.headers.get('content-type');
          let responseText = await response.text();
          
          // å¦‚æœæ˜¯JSONæ ¼å¼ï¼Œåˆ™æ ¼å¼åŒ–æ˜¾ç¤º
          if (contentType && contentType.includes('application/json')) {
            try {
              const jsonObj = JSON.parse(responseText);
              responseBodyText.textContent = JSON.stringify(jsonObj, null, 2);
            } catch (e) {
              responseBodyText.textContent = responseText;
            }
          } else {
            responseBodyText.textContent = responseText;
          }
          
          // æ˜¾ç¤ºå“åº”åŒºåŸŸ
          responseSection.classList.remove('hidden');
        } catch (error) {
          // éšè—è¿›åº¦æ¡
          progressContainer.classList.add('hidden');
          progressBar.style.width = '0%';
          
          // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
          responseStatus.className = 'mb-4 p-3 rounded-md error-message';
          responseStatus.innerHTML = `<strong>è¯·æ±‚å¤±è´¥:</strong> ${error.message}`;
          responseStatus.classList.remove('hidden');
          responseSection.classList.remove('hidden');
          
          responseHeaders.textContent = '';
          responseBodyText.textContent = '';
        }
      });
      
      // å¤åˆ¶å“åº”å†…å®¹
      copyResponseBtn.addEventListener('click', function() {
        const textToCopy = responseBodyText.textContent;
        if (textToCopy) {
          navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = copyResponseBtn.textContent;
            copyResponseBtn.textContent = 'å·²å¤åˆ¶!';
            setTimeout(() => {
              copyResponseBtn.textContent = originalText;
            }, 2000);
          }).catch(err => {
            console.error('å¤åˆ¶å¤±è´¥:', err);
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
          });
        }
      });
      
      // åˆå§‹åŒ–æ—¶æ·»åŠ ä¸€äº›å¸¸ç”¨çš„headerç¤ºä¾‹
      window.addEventListener('load', function() {
        // æ·»åŠ Content-Type headerç¤ºä¾‹
        const headerRow = document.createElement('div');
        headerRow.className = 'header-row flex p-2';
        headerRow.innerHTML = `
          <input type="text" placeholder="Key" value="Content-Type" class="flex-1 px-2 py-1 border border-gray-300 mr-1 text-sm">
          <input type="text" placeholder="Value" value="application/json" class="flex-1 px-2 py-1 border border-gray-300 ml-1 text-sm">
          <button class="remove-header text-red-600 ml-2 text-sm">-</button>
        `;
        headersContainer.appendChild(headerRow);
      });
    });
  </script>
</body>
</html>