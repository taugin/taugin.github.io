<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>字符串统计工具 - 在线工具箱</title>
  <meta name="description" content="在线字符串统计工具，统计文本的字符数、单词数、行数等各种统计信息。">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📊</text></svg>">
  <style>
    .tool-container {
      max-width: 1000px;
    }
    textarea {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-all;
    }
    .stat-item {
      transition: all 0.2s ease-in-out;
    }
    .stat-item:hover {
      transform: translateY(-2px);
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- 导航栏 -->
  <nav class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <a href="../index.html" class="flex-shrink-0 flex items-center">
            <span class="text-2xl font-bold text-indigo-600">🛠️</span>
            <h1 class="ml-2 text-xl font-bold text-gray-900">在线工具箱</h1>
          </a>
        </div>
        <div class="flex items-center">
          <a href="../index.html" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">
            返回首页
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主要内容 -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="tool-container mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl mb-4">
          字符串统计工具
        </h1>
        <p class="text-lg text-gray-500">
          统计文本的字符数、单词数、行数等各种统计信息
        </p>
      </div>

      <div class="bg-white shadow rounded-lg overflow-hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-6">
          <!-- 输入区域 -->
          <div>
            <div class="flex justify-between items-center mb-2">
              <label for="inputText" class="block text-sm font-medium text-gray-700">输入文本</label>
              <button id="clearInput" class="text-sm text-gray-500 hover:text-gray-700">清空</button>
            </div>
            <textarea 
              id="inputText" 
              rows="15" 
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
              placeholder="请输入需要统计的文本...">欢迎使用字符串统计工具！
这是一个示例文本，用于演示工具的各种统计功能。

Features:
- 字符统计
- 单词统计
- 行数统计
- 中英文混合文本处理

示例数据:
123456789
abcdefghijklmnopqrstuvwxyz
ABCDEFGHIJKLMNOPQRSTUVWXYZ</textarea>
          </div>

          <!-- 统计结果区域 -->
          <div>
            <div class="flex justify-between items-center mb-2">
              <label class="block text-sm font-medium text-gray-700">统计结果</label>
              <button id="copyStats" class="text-sm text-gray-500 hover:text-gray-700">复制结果</button>
            </div>
            <div class="border border-gray-300 rounded-md p-4 h-full">
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="stat-item bg-blue-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">总字符数</div>
                  <div id="totalChars" class="text-2xl font-bold text-blue-600">0</div>
                </div>
                
                <div class="stat-item bg-green-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">不含空格字符数</div>
                  <div id="charsNoSpaces" class="text-2xl font-bold text-green-600">0</div>
                </div>
                
                <div class="stat-item bg-yellow-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">单词数</div>
                  <div id="wordCount" class="text-2xl font-bold text-yellow-600">0</div>
                </div>
                
                <div class="stat-item bg-purple-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">行数</div>
                  <div id="lineCount" class="text-2xl font-bold text-purple-600">0</div>
                </div>
                
                <div class="stat-item bg-red-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">空行数</div>
                  <div id="emptyLineCount" class="text-2xl font-bold text-red-600">0</div>
                </div>
                
                <div class="stat-item bg-indigo-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">段落数</div>
                  <div id="paragraphCount" class="text-2xl font-bold text-indigo-600">0</div>
                </div>
                
                <div class="stat-item bg-pink-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">中文字符数</div>
                  <div id="chineseChars" class="text-2xl font-bold text-pink-600">0</div>
                </div>
                
                <div class="stat-item bg-teal-50 rounded-lg p-4 shadow">
                  <div class="text-sm text-gray-500">英文字符数</div>
                  <div id="englishChars" class="text-2xl font-bold text-teal-600">0</div>
                </div>
              </div>
              
              <div class="mt-4">
                <button id="analyzeBtn" class="w-full py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                  重新统计
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 详细统计 -->
        <div class="border-t border-gray-200 p-6">
          <h3 class="text-lg font-medium text-gray-900 mb-4">详细统计</h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium text-gray-900 mb-2">字符频率</h4>
              <div id="charFrequency" class="text-sm text-gray-600 max-h-32 overflow-y-auto">
                统计结果将显示在这里
              </div>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium text-gray-900 mb-2">单词长度分布</h4>
              <div id="wordLengthDistribution" class="text-sm text-gray-600 max-h-32 overflow-y-auto">
                统计结果将显示在这里
              </div>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium text-gray-900 mb-2">行长度统计</h4>
              <div id="lineLengthStats" class="text-sm text-gray-600 max-h-32 overflow-y-auto">
                统计结果将显示在这里
              </div>
            </div>
          </div>
        </div>

        <!-- 使用说明 -->
        <div class="border-t border-gray-200 p-6 bg-gray-50">
          <h3 class="text-lg font-medium text-gray-900 mb-2">使用说明</h3>
          <ul class="list-disc pl-5 space-y-1 text-gray-500">
            <li>在左侧输入框输入需要统计的文本</li>
            <li>统计会自动进行，也可以点击"重新统计"按钮手动触发</li>
            <li>各项统计数据会显示在右侧的统计面板中</li>
            <li>详细统计区域显示字符频率、单词长度分布等更多信息</li>
            <li>点击"复制结果"按钮可将统计结果复制到剪贴板</li>
            <li>点击"清空"按钮可清除输入内容</li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-white mt-12">
    <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
      <div class="md:flex md:items-center md:justify-between">
        <div class="flex justify-center md:justify-start">
          <div class="flex-shrink-0 flex items-center">
            <span class="text-xl font-bold text-indigo-600">🛠️</span>
            <h2 class="ml-2 text-lg font-bold text-gray-900">在线工具箱</h2>
          </div>
        </div>
        <div class="mt-8 md:mt-0 md:order-1">
          <p class="text-center text-base text-gray-400">
            &copy; 2023 在线工具箱. 所有工具均为纯前端实现，数据不会上传至服务器.
          </p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // 获取DOM元素
    const inputText = document.getElementById('inputText');
    const clearInputBtn = document.getElementById('clearInput');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const copyStatsBtn = document.getElementById('copyStats');

    // 统计结果元素
    const totalChars = document.getElementById('totalChars');
    const charsNoSpaces = document.getElementById('charsNoSpaces');
    const wordCount = document.getElementById('wordCount');
    const lineCount = document.getElementById('lineCount');
    const emptyLineCount = document.getElementById('emptyLineCount');
    const paragraphCount = document.getElementById('paragraphCount');
    const chineseChars = document.getElementById('chineseChars');
    const englishChars = document.getElementById('englishChars');

    // 详细统计元素
    const charFrequency = document.getElementById('charFrequency');
    const wordLengthDistribution = document.getElementById('wordLengthDistribution');
    const lineLengthStats = document.getElementById('lineLengthStats');

    // 初始化统计
    document.addEventListener('DOMContentLoaded', () => {
      analyzeText();
    });

    // 输入文本变化时自动统计
    inputText.addEventListener('input', () => {
      analyzeText();
    });

    // 清空输入
    clearInputBtn.addEventListener('click', () => {
      inputText.value = '';
      analyzeText();
    });

    // 重新统计
    analyzeBtn.addEventListener('click', () => {
      analyzeText();
    });

    // 复制统计结果
    copyStatsBtn.addEventListener('click', () => {
      const statsText = `字符串统计结果:
总字符数: ${totalChars.textContent}
不含空格字符数: ${charsNoSpaces.textContent}
单词数: ${wordCount.textContent}
行数: ${lineCount.textContent}
空行数: ${emptyLineCount.textContent}
段落数: ${paragraphCount.textContent}
中文字符数: ${chineseChars.textContent}
英文字符数: ${englishChars.textContent}`;
      
      const textArea = document.createElement('textarea');
      textArea.value = statsText;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      
      // 显示复制成功提示
      const originalText = copyStatsBtn.textContent;
      copyStatsBtn.textContent = '已复制!';
      setTimeout(() => {
        copyStatsBtn.textContent = originalText;
      }, 2000);
    });

    // 文本分析主函数
    function analyzeText() {
      const text = inputText.value;
      
      // 基础统计
      totalChars.textContent = text.length;
      charsNoSpaces.textContent = text.replace(/\s/g, '').length;
      lineCount.textContent = text.split('\n').length;
      
      // 单词统计
      const words = text.trim() ? text.trim().split(/\s+/).filter(word => word.length > 0) : [];
      wordCount.textContent = words.length;
      
      // 空行统计
      const lines = text.split('\n');
      const emptyLines = lines.filter(line => line.trim() === '').length;
      emptyLineCount.textContent = emptyLines;
      
      // 段落统计 (以两个换行符为分隔)
      const paragraphs = text.trim() ? text.trim().split(/\n\s*\n/).filter(p => p.trim() !== '') : [];
      paragraphCount.textContent = paragraphs.length;
      
      // 中文字符统计
      const chineseMatches = text.match(/[\u4e00-\u9fa5]/g);
      chineseChars.textContent = chineseMatches ? chineseMatches.length : 0;
      
      // 英文字符统计
      const englishMatches = text.match(/[a-zA-Z]/g);
      englishChars.textContent = englishMatches ? englishMatches.length : 0;
      
      // 详细统计
      calculateCharFrequency(text);
      calculateWordLengthDistribution(words);
      calculateLineLengthStats(lines);
    }

    // 字符频率统计
    function calculateCharFrequency(text) {
      if (!text) {
        charFrequency.innerHTML = '无数据';
        return;
      }
      
      const freq = {};
      for (let char of text) {
        freq[char] = (freq[char] || 0) + 1;
      }
      
      // 按频率排序并取前10个
      const sorted = Object.entries(freq)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      charFrequency.innerHTML = sorted
        .map(([char, count]) => {
          // 处理特殊字符显示
          const displayChar = char === ' ' ? '空格' : 
                            char === '\n' ? '换行符' : 
                            char === '\t' ? '制表符' : char;
          return `<div>${displayChar}: ${count}</div>`;
        })
        .join('');
    }

    // 单词长度分布
    function calculateWordLengthDistribution(words) {
      if (words.length === 0) {
        wordLengthDistribution.innerHTML = '无数据';
        return;
      }
      
      const lengthFreq = {};
      words.forEach(word => {
        const len = word.length;
        lengthFreq[len] = (lengthFreq[len] || 0) + 1;
      });
      
      // 按长度排序
      const sorted = Object.entries(lengthFreq)
        .sort((a, b) => parseInt(a[0]) - parseInt(b[0]));
      
      wordLengthDistribution.innerHTML = sorted
        .map(([length, count]) => `<div>长度${length}: ${count}个单词</div>`)
        .join('');
    }

    // 行长度统计
    function calculateLineLengthStats(lines) {
      if (lines.length === 0) {
        lineLengthStats.innerHTML = '无数据';
        return;
      }
      
      const lengths = lines.map(line => line.length);
      const maxLength = Math.max(...lengths);
      const minLength = Math.min(...lengths);
      const avgLength = lengths.reduce((sum, len) => sum + len, 0) / lengths.length;
      
      lineLengthStats.innerHTML = `
        <div>最长行: ${maxLength} 字符</div>
        <div>最短行: ${minLength} 字符</div>
        <div>平均长度: ${avgLength.toFixed(1)} 字符</div>
      `;
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', () => {
      // 可以在这里添加初始化逻辑
    });
  </script>
</body>
</html>